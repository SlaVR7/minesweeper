(()=>{"use strict";var e={d:(t,a)=>{for(var l in a)e.o(a,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:a[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{EP:()=>h,jw:()=>I,bK:()=>b,kD:()=>y});const t=function(){if("true"!==localStorage.getItem("resumeGame"))for(var e=0;e<+localStorage.getItem("level");e+=1){h[e]=[];for(var t=0;t<+localStorage.getItem("level");t+=1)h[e][t]={hasMine:!1,checked:!1,opened:!1,id:"".concat(e,"Y").concat(t)}}};function a(){if("true"!==localStorage.getItem("resumeGame"))for(var e=0;e<localStorage.getItem("howMatchMines");){var t=Math.floor(Math.random()*+localStorage.getItem("level")),a=Math.floor(Math.random()*+localStorage.getItem("level"));h[t][a].hasMine||(h[t][a].hasMine=!0,e+=1)}}function l(e,t,a,l){var o=document.createElement(e);if(o.className=t,a&&(o.innerText=a),l)for(var n in l)o.setAttribute(n,l[n]);return o}var o,n;function c(e){localStorage.getItem("howMatchMines")||localStorage.setItem("howMatchMines","10"),localStorage.getItem("resumeGame")||localStorage.setItem("resumeGame","false"),localStorage.getItem("time")||localStorage.setItem("time","0"),localStorage.getItem("click")||localStorage.setItem("click","0"),localStorage.getItem("level")||localStorage.setItem("level","10"),t(),a();var c="black"===localStorage.getItem("theme"),s="on"===localStorage.getItem("speaker"),r="true"===localStorage.getItem("resumeGame"),i=+localStorage.getItem("level"),m=localStorage.getItem("time"),d=localStorage.getItem("click"),u=l("h1","title","Welcome to Minesweeper!"),g=l("div","nav"),v=l("button","new-game","New game"),f=function(e,t){var a=document.createElement("div");return e&&t?a.className="speaker speakerOnWhite":e&&!t?a.className="speaker speakerOffWhite":e||t?!e&&t?a.className="speaker speakerOn":(a.className="speaker speakerOn",localStorage.setItem("speaker","on")):a.className="speaker speakerOff",a}(c,s),p=l("div","theme themeWhite"),S=l("button","resultsBtn","Results"),k=l("div","level"),b=l("div","levelContainer"),I=l("div","levelTitle","Level:"),y=l("select",void 0,void 0,{id:"options"}),w=l("option",void 0,"easy",{value:"easy"}),L=l("option",void 0,"medium",{value:"medium"}),T=l("option",void 0,"hard",{value:"hard"}),M=l("div","minesContainer"),B=l("div","howMatchMines","Mines:"),E=function(){var e=document.createElement("input");return e.setAttribute("id","selectMines"),e.setAttribute("type","number"),e.setAttribute("min","10"),e.setAttribute("max","99"),e.setAttribute("value",localStorage.getItem("howMatchMines")),e}(),O=l("div","nav"),N=l("div","timer","Time: ".concat(m," seconds")),q=l("div","countNumb","Number of click: ".concat(d)),A=l("div","gameFieldContainer"),Y=l("div","game-field"),C=l("audio",void 0,void 0,{id:"bombSound",src:"assets/sound/lose.wav"}),x=l("audio",void 0,void 0,{id:"flagSound",src:"assets/sound/click.wav"}),G=l("audio",void 0,void 0,{id:"clickSound",src:"assets/sound/tick.mp3"}),F=l("audio",void 0,void 0,{id:"winSound",src:"assets/sound/win.mp3"});switch("undefined"!==m&&"undefined"!==d||(localStorage.setItem("time","0"),localStorage.setItem("click","0")),c&&(document.body.classList.add("bodyBlack"),u.classList.add("white"),p.classList.add("themeBlack"),I.classList.add("white"),B.classList.add("white"),N.classList.add("white"),q.classList.add("white"),Y.classList.add("gameFieldBlack")),i){case 10:w.setAttribute("selected","");break;case 15:L.setAttribute("selected","");break;case 25:T.setAttribute("selected","")}g.append(v,f,p,S),document.body.append(u,g,k,O,A,C,x,G,F),k.append(b,M),b.append(I,y),y.append(w,L,T),M.append(B,E),O.append(N,q),A.append(Y),o=document.getElementById("options"),n=document.getElementById("selectMines"),localStorage.setItem("howMatchMines",n.valueAsNumber);for(var W=0;W<i;W+=1){var D=l("div","row");Y.append(D);for(var j=0;j<i;j+=1){var J=document.createElement("div");"new game"!==e&&r?(J.className=localStorage.getItem("class of ".concat(W,"Y").concat(j)),J.innerText=localStorage.getItem("inner of ".concat(W,"Y").concat(j))):J.classList.add("cell"),c&&J.classList.add("cellBlack"),J.setAttribute("id","".concat(W,"Y").concat(j)),D.append(J)}}for(var P=0;P<i;P+=1)for(var H=0;H<i;H+=1){var K=document.getElementById("".concat(P,"Y").concat(H));r||!0!==h[P][H].hasMine||K.classList.add("mine")}}function s(e){var t="on"===localStorage.getItem("speaker");if("soundToggle"===e&&(b.speaker.classList.contains("speakerOff")&&b.speaker.classList.contains("speakerOffWhite")||localStorage.setItem("speaker","off"),(b.speaker.classList.contains("speakerOff")||b.speaker.classList.contains("speakerOffWhite"))&&localStorage.setItem("speaker","on"),b.themeBtn.classList.contains("themeBlack")&&(b.speaker.classList.toggle("speakerOffWhite"),b.speaker.classList.toggle("speakerOnWhite")),b.themeBtn.classList.contains("themeBlack")||(b.speaker.classList.remove("speakerOffWhite"),b.speaker.classList.toggle("speakerOff"),b.speaker.classList.toggle("speakerOn"))),t)switch(e){case"lose":b.bombSound.play();break;case"flag":b.flagSound.play();break;case"click":b.clickSound.play();break;case"win":b.winSound.play()}}function r(){I.currentTime=Math.floor((new Date-I.startTime)/1e3),isNaN(+I.lastTime)?I.resultTime=I.currentTime:I.resultTime=+I.lastTime+ +I.currentTime,b.timer.innerText="Time: ".concat(I.resultTime," seconds"),I.timerId=setTimeout(r,1e3)}function i(e){e.preventDefault(),e.target.classList.contains("invisible")||""!==e.target.innerText||(e.target.classList.toggle("bomb-here"),s("flag"))}function m(){var e=l("div","wrapper wrapper2"),t=l("div","closeBtn"),a=l("div","slashBtn"),o=l("div","slashBtn2"),n=l("h2","resultsTitle","Your last 10 results:");if(document.body.append(e),e.append(t,n),t.append(a,o),y&&y.length>0)for(var c=0;c<=y.length-1;c++){var s=l("div","result",y[c]);e.append(s)}t.addEventListener("click",(function(){return document.body.removeChild(e)}))}function d(e){var t="on"===localStorage.getItem("speaker"),a=e.target.classList.contains("themeBlack"),l="white"===localStorage.getItem("theme");document.body.classList.toggle("bodyBlack"),l?localStorage.setItem("theme","black"):localStorage.setItem("theme","white"),[b.title,b.timer,b.countNumb,b.minesTitle,b.levelTitle].forEach((function(e){return e.classList.toggle("white")})),b.cells.forEach((function(e){e.classList.toggle("cellBlack")})),b.gameField.classList.toggle("gameFieldBlack"),b.speaker.className="speaker",t&&a?b.speaker.classList.add("speakerOn"):t||a?t&&!a?b.speaker.classList.add("speakerOnWhite"):!t&&a&&b.speaker.classList.add("speakerOff"):b.speaker.classList.add("speakerOffWhite"),b.themeBtn.classList.toggle("themeBlack")}function u(e){var t=o.value;"easy"===t&&(localStorage.setItem("level","10"),localStorage.setItem("howMatchMines","10"),g()),"medium"===t&&(localStorage.setItem("level","15"),localStorage.setItem("howMatchMines","30"),g()),"hard"===t&&(localStorage.setItem("level","25"),localStorage.setItem("howMatchMines","70"),g())}function g(){t(),function(){if("true"!==localStorage.getItem("resumeGame"))for(var e=0;e<+localStorage.getItem("level");e+=1)for(var t=0;t<+localStorage.getItem("level");t+=1)h[e][t].hasMine=!1}(),a(),localStorage.setItem("isFirstMove","true"),localStorage.setItem("time","0"),localStorage.setItem("click","0"),document.body.innerHTML="",c("new game"),o.addEventListener("change",u),b.cells=document.querySelectorAll(".cell"),b.cells.forEach((function(e){e.addEventListener("click",k),e.addEventListener("contextmenu",i)})),b.newGameBtn=document.querySelector(".new-game"),b.newGameBtn.addEventListener("click",v),clearTimeout(I.timerId),I.click=0,b.speaker=document.querySelector(".speaker"),b.speaker.addEventListener("click",(function(){return s("soundToggle")})),b.resultsBtn=document.querySelector(".resultsBtn"),b.resultsBtn.addEventListener("click",m),b.themeBtn=document.querySelector(".theme"),b.themeBtn.addEventListener("click",d),b.title=document.querySelector(".title"),b.timer=document.querySelector(".timer"),b.countNumb=document.querySelector(".countNumb"),b.gameField=document.querySelector(".game-field"),b.levelTitle=document.querySelector(".levelTitle"),b.minesTitle=document.querySelector(".howMatchMines")}function v(){if(localStorage.setItem("resumeGame","false"),n.valueAsNumber<10||n.valueAsNumber>99)return alert("Number of mines should be between 10 and 99!"),void(n.valueAsNumber=10);localStorage.setItem("howMatchMines",n.valueAsNumber),I.lastTime=0,I.resultTime=0,I.resultClick=0,g()}function f(e){I.endTime=new Date;var t=Math.floor((I.endTime-I.startTime)/1e3),a=l("div","wrapper"),o=l("div","game-over"),n=l("button","new-game","New game");"lose"===e?o.innerText="Game over. Try again":(o.innerText="Hooray! You found all mines in ".concat(t," seconds and ").concat(I.click," moves!"),s("win"),y.push("Time: ".concat(t,", Moves: ").concat(I.click)),localStorage.setItem("results",JSON.stringify(y))),document.body.append(a),a.append(o,n),clearTimeout(I.timerId),localStorage.setItem("time","0"),n.addEventListener("click",v)}function p(e,t){var a=e.split(""),l="";a.forEach((function(e){isNaN(e)&&"Y"!==e||(l+=e)}));var o=(l=l.trim()).split("Y");return"left"===t?+o[0]:"right"===t?+o[1]:void 0}function S(e){var t=e.target.classList,a=+localStorage.getItem("level");if(!t.contains("invisible")&&""===e.target.innerText){var l=e.target.getAttribute("id"),o=p(l,"left"),c=p(l,"right"),s=[document.getElementById("".concat(o-1,"Y").concat(c)),document.getElementById("".concat(o-1,"Y").concat(c-1)),document.getElementById("".concat(o,"Y").concat(c-1)),document.getElementById("".concat(o+1,"Y").concat(c-1)),document.getElementById("".concat(o+1,"Y").concat(c)),document.getElementById("".concat(o+1,"Y").concat(c+1)),document.getElementById("".concat(o,"Y").concat(c+1)),document.getElementById("".concat(o-1,"Y").concat(c+1))],r=0;s.forEach((function(e){e&&e.classList.contains("mine")&&(r+=1)})),0!==r||t.contains("bomb-here")||(t.add("invisible"),s.forEach((function(e){var t;e&&(t=e.getAttribute("id")),!t||e.classList.contains("mine")||e.classList.contains("invisible")||S({target:e})}))),0!==r&&(t.remove("bomb-here"),e.target.innerText=r,t.add(["white","blue","yellow","orange","green","violet","brown","pink"][r-1])),I.numberOfOpenedCells=0;for(var i=0;i<a;i+=1)for(var m=0;m<a;m+=1){var d=document.getElementById("".concat(i,"Y").concat(m));(d.classList.contains("invisible")||""!==d.innerText)&&(I.numberOfOpenedCells+=1)}I.numberOfOpenedCells===Math.pow(a,2)-n.valueAsNumber&&f("win")}}function k(e){var t="true"===localStorage.getItem("isFirstMove"),a=e.target.classList;if(!a.contains("invisible")&&""===e.target.innerText&&!a.contains("bomb-here")&&(a.contains("invisible")||(I.click+=1,s("click")),b.numberOfClick=document.querySelector(".countNumb"),I.resultClick=I.click+ +localStorage.getItem("click"),b.numberOfClick.innerText="Number of click: ".concat(I.resultClick),(t||"true"===localStorage.getItem("resumeGame"))&&(I.startTime=new Date,r()),!a.contains("bomb-here"))){if(a.contains("mine")&&t){v();var l=e.target.getAttribute("id");k({target:document.getElementById(l)})}else a.contains("mine")&&!t?(a.add("bomb"),s("lose"),f("lose")):S(e);localStorage.setItem("isFirstMove","false"),localStorage.setItem("resumeGame","false")}}var h=[];c(),localStorage.getItem("isFirstMove")&&"undefined"!==localStorage.getItem("isFirstMove")||localStorage.setItem("isFirstMove","true");var b={newGameBtn:document.querySelector(".new-game"),cells:document.querySelectorAll(".cell"),numberOfClick:document.querySelector(".countNumb"),bombSound:document.getElementById("bombSound"),flagSound:document.getElementById("flagSound"),clickSound:document.getElementById("clickSound"),winSound:document.getElementById("winSound"),speaker:document.querySelector(".speaker"),resultsBtn:document.querySelector(".resultsBtn"),themeBtn:document.querySelector(".theme"),title:document.querySelector(".title"),timer:document.querySelector(".timer"),countNumb:document.querySelector(".countNumb"),gameField:document.querySelector(".game-field"),levelTitle:document.querySelector(".levelTitle"),minesTitle:document.querySelector(".howMatchMines")},I={numberOfOpenedCells:null,startTime:null,endTime:null,timerId:null,click:0,currentTime:null,lastTime:localStorage.getItem("time"),resultTime:null,resultClick:null},y=[];JSON.parse(localStorage.getItem("results"))&&(y=JSON.parse(localStorage.getItem("results"))),null===localStorage.getItem("theme")&&localStorage.setItem("theme","white"),b.cells.forEach((function(e){e.addEventListener("click",(function(e){k(e)})),e.addEventListener("contextmenu",i)})),b.newGameBtn.addEventListener("click",v),b.speaker.addEventListener("click",(function(){return s("soundToggle")})),b.resultsBtn.addEventListener("click",m),b.themeBtn.addEventListener("click",d),window.addEventListener("beforeunload",(function(){for(var e=0;e<Math.pow(localStorage.getItem("level"),2);e+=1){var t="class of ".concat(b.cells[e].getAttribute("id")),a=b.cells[e].className,l=b.cells[e].innerText,o="inner of ".concat(b.cells[e].getAttribute("id"));localStorage.setItem(t,a),localStorage.setItem(o,l)}I.click>0&&(localStorage.setItem("time",I.resultTime),localStorage.setItem("click",I.resultClick)),I.numberOfOpenedCells>0&&(localStorage.setItem("isFirstMove","false"),localStorage.setItem("resumeGame","true"))})),o.addEventListener("change",(function(){return u()}))})();
//# sourceMappingURL=bundle.js.map